# IntroPARCO-2024-H2

Nicolò Bellè

unitn mail: nicolo.belle@studenti.unitn.it - ID: 238178

### Tools and Libraries
- **gcc** 9.1.0 version
- mpich-3.2.1--gcc-9.1.0 version
- **mpi.h** (and a compiler that supports MPI)

## Running the program with ```deliverable2.pbs```
To reproduce the project you need to have in the same directory these two files that you can find in this repository:
- `deliverable2.pbs`
- `deliverable2.c`
  
IMPORTANT: change the path within the file ```deliverable2.pbs``` by setting the correct one where these two files are located

To run deliverable2.pbs, use the following command:
```bash
qsub deliverable2.pbs
```
Within this file there are several controls (in case of error will be displayed the motivation in the file ```deliverable2.o```):
- if ```delivereble2.c``` is not found in the same directory
- if ```delivereble2.out``` is not created after compiling ```deliverable2.c``` due to errors reported in the ```deliverable2.e```

Also, within the ```deliverable2.pbs``` file, it is specified that the files ```deliverable2_mpi.csv``` and ```deliverable2_seq.csv``` created on the ```deliverable2.c``` are deleted at each execution, being they in append for need.

To change the size of the matrix you can modify the ```size``` parameter of the following command within the file `delivereble2.pbs`:
```bash
mpirun -np $nProcesses ./deliverable2.out size     # Replace size
```

## Running the program individually
You need to have ```deliverable2.c``` in the directory.

Compile the file ```deliverable2.c``` with this command:
```bash
mpicc deliverable2.c -o deliverable2.out
```

This will create an executable named ```deliverable2.out```.

Now, you can use the following command by replacing ```size``` with the size of the matrix:
```bash
mpirun -np $nProcesses ./deliverable2.out size     # Replace size
```

IMPORTANT: remember to remove ```deliverable2_mpi.csv``` and ```deliverable2_seq.csv``` becouse they are opened in append.
You can do this by using this command:
```bash
rm deliverable2_mpi.csv deliverable2_seq.csv
```

## Example of output 
Here is an example of the output generated by the program:
```bash

-------------------------------- MATRIX SIZE (n) = 4096 --------------------------------

NEW MATRIX: created

CHECK SYMMETRIC (sequential): NO
CHECK SYMMETRIC (mpi): NO

-->WALL CLOCK TIME SYMMETRICAL CHECK:
        -SEQUENTIAL: wall clock time SYMMETRICAL check =      0.06346 sec
        -MPI: wall clock time SYMMETRICAL check:     0.007928 sec

-->STATS MATRICES TRANSPOSITION:
        -SEQUENTIAL:
         average wall clock time TRANSPOSED MATRIX: 0.125894141 sec
         effective BANDWIDTH: 1.066 GB/s

        -MPI:
         average wall clock time, speed up and bandwidth TRANSPOSED MATRIX:

          AVG TIME TOT  |  AVG TIME FOR   | SPEED UP |  BANDWIDTH  |  EFFICIENCY
        0.047278881 sec | 0.010127783 sec |  12.431   |    13.252    |    77.69%

Example to test the function: main matrix compared to transposed matrix
(must be NOT EQUAL if the array does not contain the same values or size != 1)
-->CHECK EQUAL: NO

Example to test the function: transposed matrix sequential compared to transposed matrix mpi
(must be EQUAL)
-->CHECK EQUAL: SI


All matrices DEALLOCATED

```
